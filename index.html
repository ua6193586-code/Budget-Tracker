<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Budget Tracker</title>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  
  body { 
    font-family: 'Segoe UI', Arial, sans-serif; 
    background: #FFF8DC; 
    padding: 15px;
    min-height: 100vh;
    color: #333;
  }
  
  .container {
    max-width: 800px;
    margin: 0 auto;
    background: white;
    border-radius: 15px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    overflow: hidden;
    min-height: calc(100vh - 30px);
    display: flex;
    flex-direction: column;
  }
  
  .header {
    background: #2E8B57;
    color: white;
    padding: 20px;
    text-align: center;
  }
  
  .header h1 {
    font-size: 28px;
    margin-bottom: 15px;
  }
  
  .currency-selector {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    margin-top: 10px;
  }
  
  #currency {
    padding: 8px 15px;
    border-radius: 8px;
    border: none;
    background: white;
    font-weight: bold;
    color: #2E8B57;
    font-size: 16px;
  }
  
  .stats-container {
    display: flex;
    overflow-x: auto;
    padding: 15px;
    gap: 15px;
    background: #f8f9fa;
    border-bottom: 1px solid #e0e0e0;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
  }
  
  .stats-container::-webkit-scrollbar {
    display: none;
  }
  
  .stat-card {
    min-width: 180px;
    background: white;
    border-radius: 10px;
    padding: 15px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    border-left: 4px solid #2E8B57;
    flex-shrink: 0;
  }
  
  .stat-title {
    font-size: 14px;
    color: #666;
    margin-bottom: 8px;
  }
  
  .stat-value {
    font-size: 24px;
    font-weight: bold;
    color: #2E8B57;
  }
  
  .balance-section {
    text-align: center;
    padding: 20px;
    background: linear-gradient(135deg, #f8ff9e, #a8ff78);
    margin: 15px;
    border-radius: 12px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.1);
  }
  
  .balance-label {
    font-size: 16px;
    color: #555;
    margin-bottom: 8px;
  }
  
  .balance-amount {
    font-size: 32px;
    font-weight: bold;
    color: #2E8B57;
  }
  
  .balance-negative {
    color: #e74c3c;
  }
  
  .content {
    flex: 1;
    overflow-y: auto;
    padding: 0 15px;
    -webkit-overflow-scrolling: touch;
  }
  
  .section {
    background: #f8f9fa;
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
  }
  
  .section-title {
    color: #2E8B57;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 2px solid #e0e0e0;
    font-size: 18px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .input-group {
    margin-bottom: 15px;
  }
  
  label {
    display: block;
    margin-bottom: 6px;
    font-weight: 600;
    color: #555;
    font-size: 15px;
  }
  
  input, select, button {
    width: 100%;
    padding: 12px;
    border-radius: 8px;
    border: 1px solid #ddd;
    font-size: 16px;
    transition: all 0.3s;
  }
  
  input:focus, select:focus {
    outline: none;
    border-color: #2E8B57;
    box-shadow: 0 0 0 2px rgba(46, 139, 87, 0.1);
  }
  
  button {
    background: #2E8B57;
    color: white;
    border: none;
    font-weight: bold;
    cursor: pointer;
    margin-top: 5px;
  }
  
  button:hover {
    background: #3CB371;
    transform: translateY(-1px);
  }
  
  .btn-danger {
    background: #e74c3c;
  }
  
  .btn-danger:hover {
    background: #c0392b;
  }
  
  .expense-list {
    list-style: none;
    max-height: 300px;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    border-radius: 8px;
    margin-top: 10px;
  }
  
  .expense-item {
    background: white;
    padding: 12px 15px;
    margin-bottom: 8px;
    border-radius: 8px;
    border-left: 4px solid #2E8B57;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
  }
  
  .expense-category {
    font-weight: 600;
    color: #333;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .expense-amount {
    font-weight: bold;
    color: #2E8B57;
    font-size: 17px;
  }
  
  .delete-btn {
    background: #ff6b6b;
    color: white;
    border: none;
    padding: 6px 12px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
    margin-left: 10px;
  }
  
  .no-data {
    text-align: center;
    color: #999;
    padding: 30px;
    font-style: italic;
  }
  
  .footer {
    padding: 20px;
    text-align: center;
    border-top: 1px solid #e0e0e0;
    background: #f8f9fa;
  }
  
  .icon {
    color: #2E8B57;
  }
  
  /* Ad container styles */
  .ad-container {
    text-align: center;
    margin: 15px auto;
    background: #f8f9fa;
    border-radius: 8px;
    padding: 10px;
    border: 1px solid #e0e0e0;
  }
  
  .banner-ad {
    width: 320px;
    height: 50px;
    margin: 0 auto;
    overflow: hidden;
  }
  
  /* Mobile optimizations */
  @media (max-width: 768px) {
    body {
      padding: 10px;
    }
    
    .container {
      border-radius: 12px;
    }
    
    .header h1 {
      font-size: 24px;
    }
    
    .stat-card {
      min-width: 160px;
      padding: 12px;
    }
    
    .balance-amount {
      font-size: 28px;
    }
    
    .section {
      padding: 15px;
    }
    
    .banner-ad {
      width: 100%;
      max-width: 320px;
    }
  }
  
  @media (max-width: 480px) {
    .stat-card {
      min-width: 140px;
    }
    
    .balance-amount {
      font-size: 24px;
    }
    
    input, select, button {
      padding: 10px;
    }
  }
</style>
</head>
<body>

<!-- Social Bar Ad (Top of page) -->
<script src="https://pl28358950.effectivegatecpm.com/d2/cf/67/d2cf671ef8dc558460e2ed54677d7902.js"></script>

<div class="container">
  <div class="header">
    <h1>ðŸ“Š Budget Tracker</h1>
    <div class="currency-selector">
      <select id="currency">
        <option value="PKR">PKR (â‚¨)</option>
        <option value="USD">USD ($)</option>
        <option value="EUR">EUR (â‚¬)</option>
        <option value="GBP">GBP (Â£)</option>
        <option value="JPY">JPY (Â¥)</option>
        <option value="CAD">CAD (C$)</option>
      </select>
    </div>
  </div>
  
  <!-- Banner Ad (Below header) -->
  <div class="ad-container">
    <div class="banner-ad">
      <script>
        atOptions = {
          'key' : '3137ad55f3be25a4e738bd6ebed13fe5',
          'format' : 'iframe',
          'height' : 50,
          'width' : 320,
          'params' : {}
        };
      </script>
      <script src="https://www.highperformanceformat.com/3137ad55f3be25a4e738bd6ebed13fe5/invoke.js"></script>
    </div>
  </div>
  
  <!-- Horizontal Stats Cards -->
  <div class="stats-container">
    <div class="stat-card">
      <div class="stat-title">Monthly Income</div>
      <div class="stat-value" id="incomeDisplay">â‚¨0</div>
    </div>
    
    <div class="stat-card">
      <div class="stat-title">Total Expenses</div>
      <div class="stat-value" id="expensesDisplay">â‚¨0</div>
    </div>
    
    <div class="stat-card">
      <div class="stat-title">Monthly Savings</div>
      <div class="stat-value" id="savingsDisplay">â‚¨0</div>
    </div>
  </div>
  
  <!-- Balance Display -->
  <div class="balance-section">
    <div class="balance-label">Remaining Balance</div>
    <div class="balance-amount" id="balance">â‚¨0</div>
  </div>
  
  <!-- Scrollable Content -->
  <div class="content">
    <!-- Income Section -->
    <div class="section">
      <h2 class="section-title">ðŸ’° Monthly Income</h2>
      <div class="input-group">
        <label for="monthlyIncome">Enter your monthly income</label>
        <input type="number" id="monthlyIncome" placeholder="e.g., 50000">
      </div>
      <button onclick="calculateBalance()">Calculate Balance</button>
    </div>
    
    <!-- Banner Ad (Middle of content) -->
    <div class="ad-container">
      <div class="banner-ad">
        <script>
          atOptions = {
            'key' : '3137ad55f3be25a4e738bd6ebed13fe5',
            'format' : 'iframe',
            'height' : 50,
            'width' : 320,
            'params' : {}
          };
        </script>
        <script src="https://www.highperformanceformat.com/3137ad55f3be25a4e738bd6ebed13fe5/invoke.js"></script>
      </div>
    </div>
    
    <!-- Add Expense Section -->
    <div class="section">
      <h2 class="section-title">âž• Add Expense</h2>
      <div class="input-group">
        <label for="amount">Expense Amount</label>
        <input type="number" id="amount" placeholder="Enter amount">
      </div>
      
      <div class="input-group">
        <label for="category">Category</label>
        <select id="category" onchange="checkOtherCategory()">
          <option value="Food">Food</option>
          <option value="Travel">Travel</option>
          <option value="Grocery">Grocery</option>
          <option value="School Fees">School Fees</option>
          <option value="Petrol">Petrol</option>
          <option value="Bills">Bills</option>
          <option value="Maid Income">Maid Income</option>
          <option value="Other">Other</option>
        </select>
      </div>
      
      <div class="input-group" id="customCategoryContainer" style="display:none;">
        <label for="customCategory">Custom Category Name</label>
        <input type="text" id="customCategory" placeholder="Enter category name">
      </div>
      
      <button onclick="addExpense()">Add Expense</button>
    </div>
    
    <!-- Expense List -->
    <div class="section">
      <h2 class="section-title">ðŸ“‹ Expense List</h2>
      <ul class="expense-list" id="expenseList">
        <li class="no-data">No expenses yet. Add your first expense above.</li>
      </ul>
    </div>
    
    <!-- Banner Ad (Before reset button) -->
    <div class="ad-container">
      <div class="banner-ad">
        <script>
          atOptions = {
            'key' : '3137ad55f3be25a4e738bd6ebed13fe5',
            'format' : 'iframe',
            'height' : 50,
            'width' : 320,
            'params' : {}
          };
        </script>
        <script src="https://www.highperformanceformat.com/3137ad55f3be25a4e738bd6ebed13fe5/invoke.js"></script>
      </div>
    </div>
    
    <!-- Reset Button -->
    <div class="footer">
      <button onclick="resetAll()" class="btn-danger">ðŸ”„ Reset All Data</button>
    </div>
  </div>
</div>

<script>
let expenses = [];
let totalIncome = 0;
let totalExpenses = 0;
let currentCurrency = "PKR";

// Load saved data
document.addEventListener('DOMContentLoaded', function() {
  const savedExpenses = localStorage.getItem('budgetTrackerExpenses');
  const savedIncome = localStorage.getItem('budgetTrackerIncome');
  const savedCurrency = localStorage.getItem('budgetTrackerCurrency');
  
  if (savedExpenses) {
    expenses = JSON.parse(savedExpenses);
    totalExpenses = expenses.reduce((sum, exp) => sum + exp.amount, 0);
  }
  
  if (savedIncome) {
    totalIncome = parseFloat(savedIncome);
    document.getElementById('monthlyIncome').value = totalIncome;
  }
  
  if (savedCurrency) {
    currentCurrency = savedCurrency;
    document.getElementById('currency').value = currentCurrency;
  }
  
  updateDisplay();
});

function calculateBalance() {
  const income = parseFloat(document.getElementById('monthlyIncome').value);
  if (isNaN(income) || income < 0) { 
    alert("Please enter a valid income amount"); 
    return; 
  }
  
  totalIncome = income;
  updateDisplay();
  saveToLocalStorage();
}

function updateDisplay() {
  const remainingBalance = totalIncome - totalExpenses;
  const currencySymbol = getCurrencySymbol(currentCurrency);
  
  // Update main balance
  const balanceElement = document.getElementById('balance');
  balanceElement.textContent = `${currencySymbol}${remainingBalance.toFixed(2)}`;
  
  // Color code based on balance
  if (remainingBalance < 0) {
    balanceElement.classList.add('balance-negative');
  } else {
    balanceElement.classList.remove('balance-negative');
  }
  
  // Update horizontal stats
  document.getElementById('incomeDisplay').textContent = `${currencySymbol}${totalIncome.toFixed(2)}`;
  document.getElementById('expensesDisplay').textContent = `${currencySymbol}${totalExpenses.toFixed(2)}`;
  document.getElementById('savingsDisplay').textContent = `${currencySymbol}${Math.max(remainingBalance, 0).toFixed(2)}`;
  
  renderExpenses();
}

function checkOtherCategory() {
  const category = document.getElementById('category').value;
  document.getElementById('customCategoryContainer').style.display = 
    (category === 'Other') ? 'block' : 'none';
}

function addExpense() {
  let amount = parseFloat(document.getElementById('amount').value);
  if (isNaN(amount) || amount <= 0) { 
    alert("Please enter a valid expense amount"); 
    return; 
  }

  let category = document.getElementById('category').value;
  if (category === 'Other') {
    const customCat = document.getElementById('customCategory').value.trim();
    if (customCat === '') { 
      alert("Please enter a custom category name"); 
      return; 
    }
    category = customCat;
  }

  totalExpenses += amount;
  expenses.push({amount, category});
  
  updateDisplay();
  saveToLocalStorage();
  
  // Clear form
  document.getElementById('amount').value = '';
  document.getElementById('customCategory').value = '';
  document.getElementById('category').value = 'Food';
  document.getElementById('customCategoryContainer').style.display = 'none';
}

function renderExpenses() {
  const list = document.getElementById('expenseList');
  const currencySymbol = getCurrencySymbol(currentCurrency);
  
  if (expenses.length === 0) {
    list.innerHTML = '<li class="no-data">No expenses yet. Add your first expense above.</li>';
    return;
  }
  
  list.innerHTML = '';
  
  // Show newest first
  [...expenses].reverse().forEach((exp, index) => {
    const originalIndex = expenses.length - 1 - index;
    const li = document.createElement('li');
    li.className = 'expense-item';
    
    li.innerHTML = `
      <div class="expense-category">${exp.category}</div>
      <div>
        <span class="expense-amount">${currencySymbol}${exp.amount.toFixed(2)}</span>
        <button class="delete-btn" onclick="deleteExpense(${originalIndex})">Delete</button>
      </div>
    `;
    list.appendChild(li);
  });
}

function deleteExpense(index) {
  totalExpenses -= expenses[index].amount;
  expenses.splice(index, 1);
  updateDisplay();
  saveToLocalStorage();
}

function resetAll() {
  if (confirm("Are you sure? This will delete all data.")) {
    expenses = [];
    totalExpenses = 0;
    totalIncome = 0;
    
    document.getElementById('monthlyIncome').value = '';
    document.getElementById('amount').value = '';
    document.getElementById('category').value = 'Food';
    document.getElementById('customCategory').value = '';
    document.getElementById('customCategoryContainer').style.display = 'none';
    
    localStorage.removeItem('budgetTrackerExpenses');
    localStorage.removeItem('budgetTrackerIncome');
    localStorage.removeItem('budgetTrackerCurrency');
    
    updateDisplay();
  }
}

// Currency change
document.getElementById('currency').addEventListener('change', function() {
  currentCurrency = this.value;
  updateDisplay();
  saveToLocalStorage();
});

function getCurrencySymbol(currency) {
  const symbols = {
    'PKR': 'â‚¨',
    'USD': '$',
    'EUR': 'â‚¬',
    'GBP': 'Â£',
    'JPY': 'Â¥',
    'CAD': 'C$'
  };
  return symbols[currency] || currency;
}

function saveToLocalStorage() {
  localStorage.setItem('budgetTrackerExpenses', JSON.stringify(expenses));
  localStorage.setItem('budgetTrackerIncome', totalIncome.toString());
  localStorage.setItem('budgetTrackerCurrency', currentCurrency);
}

// Enter key support
document.getElementById('amount').addEventListener('keypress', function(e) {
  if (e.key === 'Enter') addExpense();
});

document.getElementById('customCategory').addEventListener('keypress', function(e) {
  if (e.key === 'Enter') addExpense();
});
</script>

<!-- Social Bar Ad (Bottom of page) -->
<script src="https://pl28358950.effectivegatecpm.com/d2/cf/67/d2cf671ef8dc558460e2ed54677d7902.js"></script>

</body>
</html>
